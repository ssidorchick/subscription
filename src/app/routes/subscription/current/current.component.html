<h2>Subscription</h2>
<form [formGroup]="subscriptionForm" (ngSubmit)="updateSubscription()" novalidate>
  <div class="product">
    <div class="edit-plan">
      <div>
        <select id="plan-input" formControlName="plan">
          <option *ngFor="let plan of plans" [value]="plan.value">{{plan.name}}</option>
        </select>
      </div>
      <div class="label">
        <label for="planInput">Plan</label>
      </div>
    </div>

    <div class="edit-seats">
      <div>
        <input id="seats-input" type="number" formControlName="seats">
      </div>
      <div class="label">
       <label for="seats-input">Seats</label>
      </div>
    </div>

    <div class="price">
      <div *ngIf="!!subscription" id="cost-value">{{subscription.cost | currency:subscription.currency:undefined:'1.0-0'}}</div>
      <div class="label">Price</div>
    </div>

    <p *ngIf="subscriptionForm.controls.seats?.errors?.required">Seats should be none empty</p>
    <p *ngIf="subscriptionForm.controls.seats?.errors?.min">Seats should be greater than 0</p>
    <p *ngIf="subscriptionForm.controls.seats?.errors?.max">Seats should be less than 200000</p>
    <p *ngIf="subscriptionForm.controls.seats?.errors?.integer">Seats number should be integer</p>
    <p *ngIf="apiError$ | async">{{(apiError$ | async).toString()}}</p>
  </div>
  <div class="button-section">
    <button type="submit" [disabled]="!canUpdateSubscription()">Update Subscription</button>
  </div>
</form>
